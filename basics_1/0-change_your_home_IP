#!/usr/bin/env bash
# Configure /etc/hosts so localhost -> 127.0.0.2 and facebook.com -> 8.8.8.8

# localhost: replace any existing IPv4 localhost mapping, else append
if grep -qE '^[[:space:]]*127\.0\.0\.[0-9]+[[:space:]]+localhost(\s|$)' /etc/hosts; then
  sed -i -E 's#^[[:space:]]*127\.0\.0\.[0-9]+[[:space:]]+localhost(\s|$).*#127.0.0.2 localhost#g' /etc/hosts
else
  echo '127.0.0.2 localhost' >> /etc/hosts
fi

# facebook.com: replace any existing mapping, else append
if grep -qE '[[:space:]]facebook\.com(\s|$)' /etc/hosts; then
  sed -i -E 's#^.*[[:space:]]facebook\.com(\s|$).*#8.8.8.8 facebook.com#g' /etc/hosts
else
  echo '8.8.8.8 facebook.com' >> /etc/hosts
fi
